"use strict";

function init() {
  document.getElementById("readmore").addEventListener("click", function() {
    console.log("clicked");
    document.getElementById("projects").classList.add("is-expanded");
  });
  /*document.addEventListener("scroll", (function(e) {
    console.log("scrolling");

    var dist = document.body.scrollTop;

    var features = document.querySelectorAll(".feature");

    for (var i = 0; i < features.length; i++) {
      var feature = features[i];
      var images = feature.getElementsByTagName("img");

      var offset = (dist - feature.offsetTop);
      for (var j = 0; j < images.length; j++) {

        images[j].style.transform = "translateY(" + offset / 10 + "px)";
      }

    }

  }).bind(this));


*/
  var json = '{"countries":11,"cities":83,"uniqueDessert":48,"totalDessert":76,"days":198,"locations":[[50.088992838592496,14.428900480270386],[50.08247644795365,14.426285391883443],[50.08507976681668,14.421395866902404],[50.088992838592496,14.428900480270386],[50.082596925365806,14.410194135011515],[50.08479417596319,14.422036252652482],[49.948331900949164,15.264714808581575],[49.96125434686386,15.288220755867382],[50.08479417596319,14.422036252652482],[50.08742335459363,14.420971870422363],[50.08883216862251,14.413648608245698],[50.09075844665637,14.400039911270142],[50.08692619454379,14.433704874133587],[50.08683134289367,14.38934326171875],[50.088592,14.398927],[50.08732247624202,14.419498889866663],[50.08820810301766,14.416385293006899],[50.0811793281914,14.414706230163574],[50.084854730524384,14.417045693417418],[50.08373359891778,14.42268737165675],[50.08187812128889,14.425118565559387],[50.08152012018633,14.413327574729918],[50.08906024734284,14.42963531701112],[50.088992838592496,14.428900480270386],[50.07901059509699,14.412839412689207],[50.08957973151504,14.422499886613155],[50.088832794880155,14.429107010364532],[50.088992838592496,14.428900480270386],[50.08373359891778,14.42268737165675],[50.08068932133098,14.406913498475143],[50.081809088700666,14.426882820042575],[50.0851514,14.42489555],[50.09836959838867,14.43172550201416],[50.08692619454379,14.433704874133587],[50.08575395920701,14.425383940596483],[50.08507976681668,14.421395866902404],[50.08479417596319,14.422036252652482],[50.08734586364528,14.423083386624654],[50.087290154841064,14.423097712429698],[50.08307857279638,14.414842224782275],[50.08218616666667,14.418681233333333],[50.08371039595423,14.424287218016174],[50.107368497290395,14.26699161529541],[49.004011725463776,2.5710582733154297],[48.85816464940564,2.2944259643554683],[48.87117933382086,2.3029661178588863],[48.869005749964536,2.310149073600769],[48.863649,2.326902],[48.860649275706926,2.3370838165283203],[48.858644,2.35463],[48.85781852958214,2.351492484504965],[48.86940095405255,2.780957221984863],[48.86842,2.784865],[48.869316267725026,2.784605026245117],[48.870052,2.338963],[48.880775847871554,2.3552370071411133],[48.8542115806468,2.352619171142578],[52.078455241716405,4.304522563481767],[52.07880021428572,4.30605],[52.084916135661786,4.328867587746891],[52.08261454965097,4.3239571320299826],[52.077416619999994,4.314676],[52.07739600418385,4.314837455749512],[52.08183297843979,4.324779645336211],[52.078032,4.310215],[52.07787636741281,4.310412167217021],[52.08183297843979,4.324779645336211],[52.08042909726511,4.324235916137695],[52.079477,4.312871],[52.375913903697615,4.899031384877271],[52.371824,4.874703],[52.36411487212526,4.883154198112603],[52.36411487212526,4.883154198112603],[52.37037398888889,4.883181],[52.37410516843421,4.896522538180628],[52.373902,4.895992],[52.377671,4.886212],[52.37443985269696,4.8897984623909],[52.366809,4.912166],[52.36676119008662,4.894428425624534],[52.36627118758214,4.895282491012082],[52.361305272654874,4.90065336227417],[52.37861196667141,4.900546073913574],[50.83610988162226,4.336295127868652],[50.839586865884435,4.341416864513233],[50.841774070512976,4.343063020459336],[50.84828760866905,4.348965883255005],[50.846999,4.35203],[50.84563382851392,4.35081482111936],[50.84527793534767,4.350285098780164],[50.84828760866905,4.348965883255005],[50.84828760866905,4.348965883255005],[50.84888709755992,4.3471527099609375],[50.846999,4.35203],[50.84665167605899,4.352538585662842],[50.85127683677811,4.3384040132275965],[50.898188,4.481885],[59.355634390034716,17.94564127922058],[59.33224819747543,18.05731773376465],[59.33493285158107,18.062315887463956],[59.334590277457245,18.062435388565063],[59.323551302018686,18.07022184817676],[59.336461847314055,18.062452122217497],[59.34204227073121,18.063862323760986],[59.33664321899414,18.05864906311035],[59.31945742396419,18.073251609405148],[59.31918729475427,18.074986768488824],[59.33194174515945,18.076457977294922],[59.33224819747543,18.05731773376465],[59.340409,18.058939],[59.33959193,18.068394],[59.335054,18.0777616],[59.323551302018686,18.07022184817676],[59.32555830132801,18.02401337915467],[59.3331835834416,18.06319001719669],[59.332596671614056,18.067822004611568],[59.33186678464874,18.067147076985194],[59.33048777994652,18.05634843073786],[59.335054,18.0777616],[59.31877190647982,18.062532124395943],[59.32358407788505,18.07027675328847],[59.319479997524525,18.070695367361264],[59.31651158,18.07215],[59.334590277457245,18.062435388565063],[59.335624327016504,18.06227205552388],[59.32362503,18.070208700000002],[59.30830979858579,18.07555984814995],[59.30796423218468,18.075878620147705],[59.607697,17.894433],[59.60799,17.895913],[59.65091269486194,17.93057396970995],[56.922132255419925,23.979839481592833],[50.05227345449448,8.587867500415815],[50.05037412289665,8.572028875350952],[47.44364658280913,-122.30259418487549],[47.60153331738691,-122.33239889144896],[47.61391,-122.321265],[47.65850106410974,-122.35014706850052],[47.65123501713013,-122.35436340311333],[47.651751182791656,-122.35304117202759],[47.650316583333336,-122.350124],[47.61240322045442,-122.32053805140292],[47.611806729684034,-122.3333207802012],[47.60836202040868,-122.3402953147888],[47.608697108611004,-122.33830444334991],[47.6080419448685,-122.3390132188797],[47.62338287535169,-122.3209747467501],[47.611806729684034,-122.3333207802012],[47.6122932434082,-122.336288452148],[47.611273,-122.335912],[47.62470095,-122.32109363333333],[47.616007683292786,-122.32063169658706],[47.613978394456126,-122.31760114431381],[47.61303092226215,-122.31384336948395],[47.70409409279239,-122.32546806335449],[47.70280168,-122.3250175],[47.70486059429525,-122.3259229428457],[47.610314981266164,-122.33048915863037],[47.59507995257869,-122.33173370361328],[47.60153331738691,-122.33239889144896],[47.620546,-122.321554],[47.61910963452547,-122.32109069824219],[47.61701235975557,-122.31911659240723],[47.6080419448685,-122.3390132188797],[47.615221080887274,-122.32306614671353],[47.5991130760406,-122.31674793794421],[47.59869017291052,-122.3222815990448],[47.616007683292786,-122.32063169658706],[47.62051401933607,-122.32108515777576],[47.61434501374943,-122.31931966239344],[47.61405353887538,-122.31723896872319],[47.61405700941672,-122.31884254742585],[47.61094203053143,-122.31646462983399],[47.62160817447771,-122.3210209608078],[47.616007683292786,-122.32063169658706],[47.61942241053668,-122.32444077730179],[47.619915,-122.330415],[47.616007683292786,-122.32063169658706],[47.62051576076501,-122.32096472168813],[47.61696729002676,-122.3275075512536],[47.62234979281263,-122.32087384500876],[47.61481374692148,-122.31663823127745],[47.616007683292786,-122.32063169658706],[47.61391,-122.321265],[47.61240322045442,-122.32053805140292],[47.620515,-122.32134383333334],[47.6080419448685,-122.3390132188797],[47.61076063924436,-122.33856017266613],[47.45763443,-122.257061],[47.66636940685272,-122.30086092189369],[47.62234979281263,-122.32087384500876],[47.59831017961803,-122.32653663653443],[47.65961945056915,-122.313301],[47.77541566865228,-122.3447585105896],[47.661521606318324,-122.31294751167297],[47.66379773677337,-122.31334447860716],[47.66085176666667,-122.313413],[47.661387925730004,-122.33233451843262],[47.651041093700194,-122.34732806682587],[47.62246509917516,-122.32117652893066],[47.66327392395122,-122.3130193968355],[47.66428040767408,-122.31429109094056],[47.70280168,-122.3250175],[47.70502547400204,-122.32576847076416],[47.62246,-122.33037],[47.62749789234916,-122.33662605285643],[47.608638634349504,-122.33724696430004],[47.66428040767408,-122.31429109094056],[47.66307516642836,-122.11689949035645],[47.67498907406865,-122.31663823127747],[47.67586290836334,-122.317402],[47.6080419448685,-122.3390132188797],[47.61405353887538,-122.31723896872319],[47.614872071734375,-122.31945674373031],[47.614224300463896,-122.31483042240143],[47.6589797,-122.31331765651703],[47.65961945056915,-122.313301],[47.661521606318324,-122.31294751167297],[47.609471286475696,-122.34027372161825],[47.622057,-122.337282],[47.65795530321031,-122.31328280117542],[47.661521606318324,-122.31294751167297],[47.581914,-122.386839],[47.6509001588391,-122.35012292861937],[47.65108411270378,-122.3502905927386],[47.70486059429525,-122.3259229428457],[47.70431311493763,-122.32575513386027],[47.66205248333333,-122.30802881666666],[47.584327400160774,-122.3344373703003],[47.62542795922696,-122.3561879783465],[47.611123268727994,-122.33469218015671],[47.6087,-122.33936875],[47.61326960008122,-122.34602183103561],[47.65921,-122.313355],[47.66327392395122,-122.3130193968355],[47.661721824441976,-122.2995824288194],[47.625122,-122.355371],[47.62460537354855,-122.35477020430989],[47.67082059945155,-122.30401039123535],[47.666575,-122.313295],[47.66249802515746,-122.31311158089181],[47.70502547400204,-122.32576847076416],[47.705078,-122.325805],[47.70280168,-122.3250175],[46.976931,-120.542231],[47.104592199530884,-119.98075939799786],[46.991316095547106,-120.55101631449419],[47.6080419448685,-122.3390132188797],[47.65906389467612,-122.31294028836562],[47.658369,-122.313741],[47.655270769389574,-122.30540513992308],[47.661608275000006,-122.313157],[47.66516625881195,-122.31290978333334],[47.611806729684034,-122.3333207802012],[47.58648387645128,-122.37645149230957],[47.5933145437395,-122.3708724975586],[47.66327392395122,-122.3130193968355],[47.658602,-122.313305],[47.61696729002676,-122.3275075512536],[47.61240322045442,-122.32053805140292],[47.660056,-122.313527],[47.66327392395122,-122.3130193968355],[47.611806729684034,-122.3333207802012],[47.59800287561177,-122.3248028755188],[47.605239556196594,-122.34072300148378],[47.60889728360187,-122.34109997749329],[47.65217759297518,-122.35503673553467],[47.650038539807646,-122.34982797785017],[47.61803388771693,-122.33803689479828],[47.621568,-122.351818],[47.613595068078915,-122.31444418430328],[47.5647703288108,-122.33061790466309],[47.596501,-122.326406],[47.59678380503681,-122.32700765132904],[47.661608275000006,-122.313157],[47.61240322045442,-122.32053805140292],[47.66327392395122,-122.3130193968355],[47.59852870917519,-122.32732135675741],[47.66327392395122,-122.3130193968355],[47.66900897917552,-122.33218163251877],[47.6441836297421,-122.13709115982056],[47.66249802515746,-122.31311158089181],[47.5647703288108,-122.33061790466309],[47.619915,-122.330415],[47.661608275000006,-122.313157],[47.61696729002676,-122.3275075512536],[47.61240322045442,-122.32053805140292],[47.59735,-122.32410414],[47.59678380503681,-122.32700765132904],[47.760006,-122.20477490445195],[47.661721824441976,-122.2995824288194],[47.70280168,-122.3250175],[47.58648387645128,-122.37645149230957],[47.614625,-122.318018],[47.617807887674864,-122.20049858093262],[47.61672307387488,-122.200927734375],[47.66169598035857,-122.29990049396852],[47.66205248333333,-122.30802881666666],[47.653825382654695,-122.3078727722168],[47.45763443,-122.257061],[47.44364658280913,-122.30259418487549],[33.67956837093503,-117.86175727844238],[33.61566209,-117.877105],[33.67279443980515,-117.84671420257905],[34.09962663,-118.32897092647327],[34.06323677902185,-118.29762160778044],[34.0407827647928,-118.27005386352539],[33.63092264968405,-117.79789782020568],[33.6687469278737,-117.85231590270996],[33.61595927654458,-117.87471235677239],[33.61657830806043,-117.87285147326801],[33.69594879718571,-117.79814399547082],[33.64986613499707,-117.83900450791944],[33.742545,-117.81639575958252],[33.67734234885565,-117.8002164346241],[33.64986613499707,-117.83900450791944],[33.64986613499707,-117.83900450791944],[33.650676977053514,-117.83870115024287],[33.81851869758065,-118.1443977355957],[42.36650312404415,-71.01667642593384],[42.34993702509127,-71.09593299012087],[42.348843,-71.093751],[42.348843,-71.093751],[42.35102527890308,-71.07543652722441],[42.350354070129285,-71.07972508564598],[42.348843,-71.093751],[42.34201099398621,-71.07303398626209],[42.34859349145467,-71.09597861766815],[42.349299191096264,-71.07830286026001],[42.348843,-71.093751],[42.34925954525904,-71.08100652694702],[42.396807487355005,-71.1225095276319],[42.39569330638772,-71.12374546790313],[42.348843,-71.093751],[42.345838383448864,-71.03191005016869],[42.61479058156006,-70.66833904102621],[42.612388485557226,-70.66246072205708],[42.52038056142736,-70.89741949171255],[42.519713493305126,-70.89512624466371],[42.52142091666666,-70.898719],[42.520147,-70.892905],[42.365174347549676,-71.06098026034488],[42.34878435353519,-71.09682083725647],[42.343822568807674,-71.10069716659847],[42.36352250343114,-71.09940648078918],[42.34910071632055,-71.09560222304236],[42.345074858339395,-71.10347672714359],[42.36777143034989,-71.07132911682129],[42.36508417601608,-71.06157660484314],[42.34855384517235,-71.09738945960999],[42.383174,-71.112317],[42.357549834051326,-71.05833987742872],[42.36009778602675,-71.05472087860107],[42.359197973984664,-71.05488181114197],[42.359146442508454,-71.04946374893188],[42.351180245980544,-71.06303485347806],[42.34993702509127,-71.09593299012087],[42.358559773492416,-71.05328321456909],[42.35899,-71.05423],[42.347404092107595,-71.09466433525085],[42.34733171945798,-71.08211004172419],[42.347888,-71.08247519999999],[42.34855384517235,-71.09738945960999],[42.34993702509127,-71.09593299012087],[42.3591393035636,-71.09339710227161],[42.37333582162159,-71.11857891082764],[42.35115671132335,-71.04879306697802],[42.352264000808354,-71.05141628562973],[42.357708535435506,-71.05838630514373],[42.355380566402374,-71.06376528739929],[42.356349,-71.069312],[42.354992073710456,-71.06609344482422],[42.35121791558168,-71.06331921989064],[42.36650312404415,-71.01667642593384],[33.81851869758065,-118.1443977355957],[33.64986613499707,-117.83900450791944],[33.650565,-117.838046],[33.66363386838857,-117.82636036175064],[33.696789,-117.828884],[33.6735495549403,-117.84558667292741],[33.64986613499707,-117.83900450791944],[33.65018793035544,-117.84062951803207],[33.60837366866203,-117.9280936717987],[33.60977560120762,-117.92990313087883],[33.65109219657597,-117.74612993001938],[33.64986613499707,-117.83900450791944],[33.611448051235186,-117.92833560994004],[33.67279443980515,-117.84671420257905],[33.66378877430822,-117.82599974176436],[33.94389397698472,-118.40502262115479],[35.76392906729704,140.38338100602846],[35.76834146030437,140.3871738910675],[35.67226693586124,139.76577579975128],[35.66580722138638,139.75602462887764],[35.65996263061471,139.6959625929594],[35.660365729999675,139.69933660106722],[35.66168062606037,139.69871333433622],[35.66785514494584,139.69754659666876],[35.62467789104938,139.88856196403503],[35.62603834517189,139.88786458969116],[35.62836676101229,139.88303661346433],[35.62632327407461,139.8859373936737],[35.627006346509766,139.88300442695618],[35.626648797831045,139.88277912139893],[35.626640077111574,139.8810839653015],[35.624965681351924,139.88788604736328],[35.627677836048385,139.88261818885803],[35.628411593295326,139.8811208286381],[35.626055786741134,139.88469421863556],[35.62488283273465,139.88254845142365],[35.62642205881601,139.88460302352905],[35.626404617326685,139.88771438598633],[35.6352208049991,139.88508582115173],[35.633860507136994,139.8787236213684],[35.63364,139.87984385],[35.630625346788776,139.88314390182495],[35.629809995962994,139.88011300563812],[35.63100903841748,139.88207906484604],[35.63249661862871,139.88027559399896],[35.63115074224652,139.88096326589584],[35.631689214505876,139.88197445869446],[35.63372534807219,139.88239288330078],[35.632411,139.883274],[35.63431830227131,139.88056629896164],[35.63030269558466,139.88143801689148],[35.63231052414406,139.87916082143784],[35.63239990513326,139.87775802612305],[35.63063406707353,139.8799467086792],[35.63343976929657,139.87833738327026],[35.6359009452485,139.87865388393402],[35.698596195264464,139.77301824864617],[35.6567,139.701536],[35.65132415268901,139.70944138161462],[35.70387432906506,139.7916773961137],[35.706967965515,139.77419622349134],[35.73117665405299,139.71263587474823],[35.69782678806618,139.78658380747103],[35.68137872227962,139.76608157157898],[35.6831521532426,139.76899445056915],[35.705066,139.792273],[35.711128819925605,139.7920269721153],[35.7147738972871,139.7916024872378],[35.71056342173919,139.7973695397377],[35.66153035507163,139.69787068815685],[35.660365729999675,139.69933660106722],[35.662716,139.697197],[35.65981117114024,139.70035403966904],[35.703868,139.79338],[35.69433507384574,139.70275221934386],[35.692531727319626,139.7020673006773],[35.64506483469479,139.69786763191223],[35.64751911380506,139.69467043876648],[35.6491396377691,139.6993750333786],[35.66287851255103,139.73325719276838],[35.66048674355746,139.7292709350586],[35.664131057331595,139.73139631857916],[35.674581476111804,139.71712924540043],[35.66751235787164,139.69682693481445],[35.66153035507163,139.69787068815685],[35.660365729999675,139.69933660106722],[35.553709811156466,139.64637458324432],[35.55295968776144,139.64861154556274],[35.69193230101997,139.70028896531508],[35.69240423181569,139.72429260697612],[35.66153035507163,139.69787068815685],[35.66104027282634,139.69954669475555],[35.65972846412095,139.70010946093353],[35.71161642418877,139.79713015258312],[35.71536334489177,139.79280978441238],[35.68137872227962,139.76608157157898],[34.985495377562586,135.75859308242798],[35.00712936306198,135.76649755239487],[35.009127460636925,135.77025420964446],[35.006273,135.768962],[34.996113136463975,135.78092515468597],[35.00424142716329,135.76952308416367],[35.00458526055671,135.76757848262787],[35.00810831887075,135.7669291834539],[34.988202685312565,135.7590651512146],[34.988097207466,135.75908660888672],[34.99290795765432,135.75513909],[34.989102336537925,135.76810491171165],[34.98975923496134,135.76816971647457],[34.98991008904809,135.764898955822],[35.01178675503966,135.768141746521],[34.985495377562586,135.75859308242798],[34.73347473587384,135.50010323524475],[34.6673742438789,135.5014792084694],[34.667580507546255,135.50141215324402],[34.668805394306176,135.50253264606],[34.6690408837418,135.5019325017929],[34.668091301183274,135.4900786009739],[34.682925304444446,135.82883208990097],[34.646784052086836,135.51491355693125],[34.6873529623778,135.52582025527954],[34.668120982099715,135.4898625612259],[34.672937667932885,135.48994705080986],[34.668091301183274,135.4900786009739],[34.70507004611827,135.49468517303467],[34.702423971363224,135.49590826034546],[34.393731,132.447037],[34.39755280567059,132.47568726539612],[34.30808490305351,132.99300668583626],[34.399363,132.447638],[34.387743,132.460185],[34.393210411127754,132.46373534202576],[34.39402933049658,132.4609673023224],[34.39335427592134,132.45953634381294],[34.392435750296315,132.46288776397705],[34.39393194591032,132.45625466108322],[34.39547237972218,132.45359659194946],[34.396447,132.446745],[34.39304994625857,132.44725853204727],[34.39594004006029,132.47002432447778],[34.39755280567059,132.47568726539612],[34.68631,135.51968],[34.73347473587384,135.50010323524475],[34.733876846022326,135.502700123383],[35.71578515076701,139.7948236540892],[35.76834146030437,140.3871738910675],[-16.87566244064172,145.75501441955566],[-16.922155139904497,145.77884316444397],[-16.916278095590812,145.77348587919747],[-16.920012299948315,145.77956029528542],[-16.921819377682784,145.77619461624408],[-16.92592978477478,145.770886],[-16.921819377682784,145.77619461624408],[-16.925830665057788,145.7700172953284],[-16.92246793727434,145.77541835658235],[-16.87566244064172,145.75501441955566],[-27.38540530169057,153.1201833486557],[-27.466583974109344,153.0197024345398],[-26.39573982271274,153.0898638265675],[-26.386850357055664,153.0892333984375],[-26.396943968390058,153.08980464935303],[-26.397513601117268,153.09142803773983],[-26.386489823597607,153.08889770184004],[-26.396728266366324,153.09021462293313],[-26.386901,153.090252],[-26.397513601117268,153.09142803773983],[-26.386845,153.089031],[-26.39646,153.090211],[-26.38866529566083,153.09229640989795],[-26.386683,153.08915],[-26.39573982271274,153.0898638265675],[-26.39533746769524,153.08950152928432],[-26.396059826690536,153.08952569961548],[-26.6051047172447,153.08847427368164],[-37.686804,144.848394],[-37.811404,144.969277],[-37.81878472855899,144.96871534678516],[-37.817321,144.96581],[-37.812017,144.969302],[-37.81785296925242,144.9682903289795],[-38.51037986279329,145.14999389648438],[-38.319562,144.71464411],[-37.86546951888455,144.98555066875474],[-37.86801024855182,144.97672319412231],[-37.810857816033376,144.96444519679523],[-37.81195,144.964932],[-37.81144749555814,144.96918862612355],[-37.79859436217878,144.9612522125244],[-37.812949911565596,144.9678333333051],[-37.81191357155757,144.96918862612355],[-37.8105807228458,144.96457278728485],[-37.80581882256167,144.95579800058627],[-37.80742971593997,144.95751338731606],[-37.812949911565596,144.9678333333051],[-37.81878472855899,144.96871534678516],[-37.811404,144.969277],[-37.811592,144.969639],[-37.81200894433514,144.96662326888347],[-37.811744749031924,144.96823669198074],[-37.807842850086864,144.95693117380142],[-37.808716,144.967038],[-37.80539274215698,144.952091],[-37.7860286846671,144.96194451692645],[-37.79699194706393,144.9609388881408],[-37.80251091181261,144.94958728551865],[-37.80519711779752,144.94981324210573],[-37.810834,144.96311],[-37.810326435534755,144.96305465698242],[-37.823495781692706,145.03954857111034],[-37.816312,145.036473],[-37.816657,145.036519],[-37.8056526184082,144.9538116455078],[-37.805631,144.953952],[-37.808604018907076,144.9606269843304],[-37.808685,144.960619],[-37.80859400141441,144.9606431172577],[-37.804445671247215,144.9506843125178],[-37.810834,144.96311],[-37.814213227059234,144.96648344033903],[-37.80583697403343,144.95585715126995],[-37.804445671247215,144.9506843125178],[-37.80742971593997,144.95751338731606],[-37.686804,144.848394],[-37.81424236302227,144.9631404876709],[-33.93492182154137,151.17326974868774],[-33.891169026813074,151.27525806427002],[-33.89037639020409,151.2745177745819],[-33.890022,151.272206],[-33.9206158573927,151.25563937140964],[-33.920816025726936,151.25700502703256],[-33.9207139752228,151.25478208065033],[-33.8925583496152,151.2472711800001],[-33.87305,151.224356],[-33.87860686417747,151.221386122182],[-33.876214,151.221327],[-33.868758098858386,151.21940527262976],[-33.868985420018646,151.22531943410436],[-33.85733737872545,151.21505856513977],[-33.85908752569845,151.2086419508852],[-33.873597815397105,151.20667833540608],[-33.873237,151.208112],[-33.87324840976028,151.20811262605466],[-33.87387184484754,151.2231159210205],[-33.8746557270868,151.22271358966827],[-33.87331282774297,151.22395329445737],[-33.871046,151.225012],[-33.86684330630886,151.2071943283081],[-28.642840999141836,153.61463149544267],[-28.645134361082714,153.61293107514757],[-28.644705451895273,153.60506772994995],[-28.645134361082714,153.61293107514757],[-28.64202269970363,153.61211833618458],[-28.645134361082714,153.61293107514757],[-28.641797,153.612573],[-28.641389983358,153.61271203884138],[-28.642374,153.612333],[-28.64247154375234,153.61241230527585],[-28.64202269970363,153.61211833618458],[-28.643060920766022,153.6130521216139],[-28.000724,153.42826],[-28.001081,153.428054],[-28.001081,153.428054],[-27.998977479912934,153.43067134341192],[-28.001081,153.428054],[-28.003325071141433,153.42849791049957],[-28.00070029197417,153.42837902863928],[-28.001081,153.428054],[-28.00169703486842,153.43095932427747],[-28.001081,153.428054],[-28.003325071141433,153.42849791049957],[-28.002055720839255,153.4273338317871],[-28.000018851039826,153.42856333450607],[-28.00292721668559,153.43183994293213],[-27.466583974109344,153.0197024345398],[-27.458606248187078,153.03381856749573],[-27.457901865107456,153.03453505039215],[-27.458674,153.03386],[-27.45844508143576,153.03370358264746],[-27.469544493087625,153.02495956420898],[-27.47039170092506,153.02568912506104],[-27.439349,153.066552],[-27.43931662866981,153.06698854410973],[-17.73598199215391,168.31135996841004]]}';
  json = JSON.parse(json);

  // json = JSON.parse(json);


  // var startDate = new Date(2013, 13, 12);
  // var daysSinceStart = Math.round((Date.now() - startDate) / 1000 / 60 / 60 / 24);
  // document.getElementById("dayNum").textContent = daysSinceStart;

  function showMap() {
    var map = null;

    window.isLoaded.goog
      .then(function() {
        console.log("loading the map");
        var mapEle = document.getElementById("map");
        map = new google.maps.Map(mapEle, {
          disableDefaultUI: true,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
        });
        map.setCenter(new google.maps.LatLng(0, 0));
        map.setZoom(1);

        window.maps = map;


      })
      .then(function() {
        console.log("Google loaded");

        function getMarker(position) {
          return {
            position: new google.maps.LatLng(position[0], position[1]),
            map: map,
            icon: {
              path: google.maps.SymbolPath.CIRCLE,
              scale: 6,
              strokeWeight: 1,
              strokeColor: 'white',
              fillColor: '#ad24ab',
              fillOpacity: 1
            }
          }
        }

        var bounds = new google.maps.LatLngBounds();

        for (var i = 0; i < json.locations.length; i++) {
          var marker = getMarker(json.locations[i]);

          bounds.extend(marker.position);

          new google.maps.Marker(marker);
        }

        map.fitBounds(bounds);

      })
      .catch(function(error) {
        console.error(error);
      });
  }
}

if (document.readyState === "interactive" || document.readyState === "complete") {
  init();
} else {
  document.addEventListener("DOMContentLoaded", init, false);
}



// function isLoaded() {
//   this.init();
// }

// isLoaded.prototype = {
//   goog: null,
//   _googResolve: null,

//   init: function() {
//     this.goog = new Promise((function(resolve) {
//       this._googResolve = resolve;
//     }).bind(this));
//   },

//   googLoaded: function() {
//     this._googResolve();
//   }
// };

// window.isLoaded = new isLoaded();

// window.startMap = function() {
//   window.isLoaded.googLoaded();
// };